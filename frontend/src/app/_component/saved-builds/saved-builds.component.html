<div class="d-flex align-items-center justify-content-between py-1 mb-2 px-1">
  <h5 class="mb-0">Saved Builds</h5>

  <input type="text"
         class="form-control form-control-sm w-auto"
         style="max-width: 140px;"
         placeholder="Search builds..."
         [(ngModel)]="searchText">
</div>

@if (loading) {
  <div class="text-center my-2">Loading...</div>
}

@if (error) {
  <div class="alert alert-danger">{{ error }}</div>
}

<div class="saved-builds-container">

  @let favs = savedBuilds$ | async;
  @for (fav of filteredBuilds(favs); track fav.id) {
    <div class="card">
      <div class="card-body d-flex flex-wrap p-1">

        <div class="w-100 text-center mb-1">
          <strong class="text-truncate d-block">{{ fav.build.name || 'Unnamed Build' }}</strong>
        </div>

        <div class="m-0 text-center" style="width: 70px;" [appTooltip]="fav.build.champion.name">
          <img [src]="'http://192.168.0.84:8081/' + fav.build.champion.imageUrl"
               alt="{{fav.build.champion.name}}"
               class="img-fluid">
          <small class="d-block text-truncate">{{ fav.build.champion.name }}</small>
        </div>

        @for (item of fav.build.items; track item.id) {
          <div class="m-1 text-center" style="width: 60px;" [appTooltip]="item.name">
            <img [src]="'http://192.168.0.84:8081/' + item.imageUrl" alt="{{item.name}}" class="img-fluid">
            <small class="d-block text-truncate">{{ item.name }}</small>
          </div>
        }

        <!-- IKONOK -->
        <div class="ms-auto d-flex align-items-center gap-2">

          <i class="bi"
             [ngClass]="hoveredEditId ===fav.id ? 'bi-pencil-fill' : 'bi-pencil'"
             (mouseenter)="hoveredEditId = fav.id"
             (mouseleave)="hoveredEditId = null"
             (click)="editBuild(fav)"
             style="cursor: pointer; font-size: 3rem;">
          </i>

          <i class="bi text-danger"
             [ngClass]="hoveredDeleteId === fav.id ? 'bi-trash-fill' : 'bi-trash'"
             (mouseenter)="hoveredDeleteId = fav.id"
             (mouseleave)="hoveredDeleteId = null"
             (click)="deleteBuild(fav)"
             style="cursor: pointer; font-size: 3rem;">
          </i>

        </div>

      </div>
    </div>
  }
</div>
